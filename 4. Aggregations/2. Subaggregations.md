
# Write and execute aggregations that contain sub-aggregations

Nested [terms aggregation.](https://www.elastic.co/guide/en/elasticsearch/reference/7.2/search-aggregations-bucket-terms-aggregation.html)

If we indexed a 'colour' field for a bunch of products, we could answer the question "How many products of each size (S, M, L) do we have in each colour?"

```json
GET products/_search
{
  "size": 0, 
  "aggs": {
    "colours": {
      "terms": {
        "field": "colour.keyword"
      },
      "aggs": {
        "sizes": {
          "terms": {
            "field": "size.keyword",
            "size": 3
          }
        }
      }
    }
  }
}
```
